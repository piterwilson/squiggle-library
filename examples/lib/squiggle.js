!function(e,t){"function"==typeof define&&define.amd?define(["jquery","underscore","backbone","p5"],t):e.squiggle=t(e.$,e._,e.Backbone,e.p5)}(this,function(e,t,s,n){var r,o,h;return function(e){function t(e,t){var i,s,n,r,o,h,a,u,l,d,c=t&&t.split("/"),g=f.map,p=g&&g["*"]||{};if(e&&"."===e.charAt(0)&&t){for(c=c.slice(0,c.length-1),e=c.concat(e.split("/")),u=0;d=e[u];u++)if("."===d)e.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===e[2]||".."===e[0]))return!0;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((c||p)&&g){for(i=e.split("/"),u=i.length;u>0;u-=1){if(s=i.slice(0,u).join("/"),c)for(l=c.length;l>0;l-=1)if(n=g[c.slice(0,l).join("/")],n&&(n=n[s])){r=n,o=u;break}if(r)break;!h&&p&&p[s]&&(h=p[s],a=u)}!r&&h&&(r=h,o=a),r&&(i.splice(0,o,r),e=i.join("/"))}return e}function i(t,i){return function(){return c.apply(e,m.call(arguments,0).concat([t,i]))}}function s(e){return function(i){return t(i,e)}}function n(e){return function(t){g[e]=t}}function a(t){if(p.hasOwnProperty(t)){var i=p[t];delete p[t],v[t]=!0,d.apply(e,i)}if(!g.hasOwnProperty(t))throw new Error("No "+t);return g[t]}function u(e,i){var n,r,o=e.indexOf("!");return-1!==o?(n=t(e.slice(0,o),i),e=e.slice(o+1),r=a(n),e=r&&r.normalize?r.normalize(e,s(i)):t(e,i)):e=t(e,i),{f:n?n+"!"+e:e,n:e,p:r}}function l(e){return function(){return f&&f.config&&f.config[e]||{}}}var d,c,g={},p={},f={},v={},m=[].slice;d=function(t,s,r,o){var h,d,c,f,m,w,_=[];if(o=o||t,"function"==typeof r){for(s=!s.length&&r.length?["require","exports","module"]:s,w=0;w<s.length;w++)if(m=u(s[w],o),c=m.f,"require"===c)_[w]=i(t);else if("exports"===c)_[w]=g[t]={},h=!0;else if("module"===c)d=_[w]={id:t,uri:"",exports:g[t],config:l(t)};else if(g.hasOwnProperty(c)||p.hasOwnProperty(c))_[w]=a(c);else if(m.p)m.p.load(m.n,i(o,!0),n(c),{}),_[w]=g[c];else if(!v[c])throw new Error(t+" missing "+c);f=r.apply(g[t],_),t&&(d&&d.exports!==e&&d.exports!==g[t]?g[t]=d.exports:f===e&&h||(g[t]=f))}else t&&(g[t]=r)},r=o=c=function(t,i,s,n){return"string"==typeof t?a(u(t,i).f):(t.splice||(f=t,i.splice?(t=i,i=s,s=null):t=e),i=i||function(){},n?d(e,t,i,s):setTimeout(function(){d(e,t,i,s)},15),c)},c.config=function(e){return f=e,c},h=function(e,t,i){t.splice||(i=t,t=[]),p[e]=[e,t,i]},h.amd={jQuery:!0}}(),h("../tools/almond",function(){}),h("squiggle/models/AppSettings",["require","exports","module"],function(e,t,i){var s={sketch:null,defaultStrokeColor:"Black",defaultFillColor:"Red",defaultStrokeWeight:2};return s}),h("squiggle/models/Frame",["require","exports","module","backbone"],function(e,t,i){var s=e("backbone"),n=s.Model.extend({initialize:function(){this.set("lines",[])},addLine:function(e){this.get("lines").push(e),this.trigger("change")},clear:function(){this.set("lines",[]),this.trigger("change")}});return n}),h("squiggle/models/Animation",["require","exports","module","backbone","squiggle/models/Frame"],function(e,t,i){var s=e("backbone"),n=e("squiggle/models/Frame"),r=s.Collection.extend({model:n});return r}),h("squiggle/models/Line",["require","exports","module","backbone","squiggle/models/AppSettings"],function(e,t,i){var s=e("backbone"),n=e("squiggle/models/AppSettings"),r=s.Model.extend({initialize:function(){var e=n.sketch;this.set("strokeColor",n.defaultStrokeColor).set("strokeWeight",n.defaultStrokeWeight).set("points",[]),void 0!==e&&this.set("strokeCap",e.SQUARE).set("strokeJoin",e.MITER)},addPoint:function(e,t){this.get("points").push([e,t]),this.trigger("change")},clear:function(){this.set("points",[]).trigger("change")},exportStrokeProperties:function(){return ob={strokeColor:this.get("strokeColor"),strokeWeight:this.get("strokeWeight")},void 0!==this.get("strokeCap")&&(ob.strokeCap=this.get("strokeCap")),void 0!==this.get("strokeJoin")&&(ob.strokeCap=this.get("strokeJoin")),ob}});return r}),h("squiggle/utils/MathUtils",["require","exports","module"],function(e,t,i){var s={coinToss:function(){return 1*Math.random()>.5?1:-1}};return s}),h("squiggle/views/View",["require","exports","module","backbone","underscore","squiggle/models/AppSettings"],function(e,t,s){var n=e("backbone"),r=e("underscore"),o=e("squiggle/models/AppSettings"),h=n.View.extend({initialize:function(e){if(null===e||void 0===e?this.sketch=o.sketch:this.sketch=e,void 0===this.sketch)throw new Error("no sketch defined");this.subviews=[],this.parent=null,this.debug=!1,this.initProperties([{name:"x",value:0},{name:"y",value:0},{name:"offsetX",value:0},{name:"offsetY",value:0},{name:"hidden",value:!1},{name:"userInteractionEnabled",value:!1}])},windowResized:function(){for(var e in this.subviews){var t=this.subviews[e];t.windowResized&&t.windowResized.call(this.subviews[e])}},log:function(e){this.debug&&console.log(this.constructor.name+" ("+this.cid+") "+e)},isMouseOverRectangle:function(e,t,i,s){return this.sketch.mouseX>e&&this.sketch.mouseX<i&&this.sketch.mouseY>t&&this.sketch.mouseY<s},initProperties:function(e){r.each(e,function(e){if(!e.name||void 0===e.value)throw new Error("initProperties() parameters require an Object with properties 'name' and 'value'");this.createGetter(e.name),this.createSetter(e.name),this["set"+(e.name.charAt(0).toUpperCase()+e.name.slice(1))].call(this,e.value)}.bind(this))},createSetter:function(e){this["set"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(t){return this[e]=t,this}},createGetter:function(e){this["get"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(){return this[e]}},setPosition:function(e,t){return this.setX(e).setY(t)},addSubview:function(){var e;for(i=0;i<arguments.length;i++)e=arguments[i],r.has(e,"parent")?(e.parent&&e.parent.removeSubview(e),e.parent=this,this.subviews.push(e)):console.log("Warning : "+e+" has no parent?");return this},removeSubview:function(){var e;for(i=0;i<arguments.length;i++){e=arguments[i];for(var t in this.subviews)this.subviews[t]!==e||(e.parent=null,this.subviews.splice(t,1))}return this},removeAllSubviews:function(){return r.each(this.subviews,function(e){e.parent=void 0}),this.subviews=[],this},draw:function(){this.hidden||r.each(this.subviews,function(e){e.draw([this.x+this.offsetX,this.y+this.offsetY])}.bind(this))},updateOffset:function(e){void 0!=e[0]&&(this.offsetX=e[0],this.offsetY=e[1])},mouseMoved:function(){r.each(this.subviews,function(e){e.userInteractionEnabled&&"function"==typeof e.mouseMoved&&e.mouseMoved.call(e)})},mouseDragged:function(){r.each(this.subviews,function(e){e.userInteractionEnabled&&"function"==typeof e.mouseDragged&&e.mouseDragged.call(e)})},mousePressed:function(){r.each(this.subviews,function(e){e.userInteractionEnabled&&"function"==typeof e.mousePressed&&e.mousePressed.call(e)})},mouseReleased:function(){r.each(this.subviews,function(e){e.userInteractionEnabled&&"function"==typeof e.mouseReleased&&e.mouseReleased.call(e)})}});return h}),h("squiggle/views/primitives/DrawView",["require","exports","module","squiggle/views/View"],function(e,t,i){var s=e("squiggle/views/View"),n=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.initProperties([{name:"strokeColor",value:"rgba(0,0,0,1.0)"},{name:"strokeWeight",value:4},{name:"strokeCap",value:this.sketch.SQUARE},{name:"strokeJoin",value:this.sketch.MITER},{name:"fill",value:!0},{name:"closed",value:!0},{name:"defaultJerkinessBump",value:10},{name:"defaultJerkinessBumpIncrease",value:1},{name:"fillColor",value:"rgba(255,0,0,1.0)"}]),this.__jerkItCallback=void 0,this.jerkiness=.5,this.setJerkiness(.5)},applyStrokeProperties:function(e,t){return void 0===e&&(e=this.sketch),void 0===t&&(t=this),void 0!==t.strokeCap&&e.strokeCap(t.strokeCap),void 0!==t.strokeJoin&&e.strokeJoin(t.strokeJoin),e.strokeWeight(t.strokeWeight),e.stroke(t.strokeColor),this},setJerkiness:function(e){return this.jerkiness=e,this.originalJerkiness=e,this},getJerkiness:function(){return this.jerkiness},jerkIt:function(e){var t;void 0===e?t=this.defaultJerkinessBump:(t=void 0===e.amount?this.defaultJerkinessBump:e.amount,void 0!==e.complete&&"function"==typeof e.complete&&(this.__jerkItCallback=e.complete)),this.jerkiness=t;for(var i in this.subviews){var s=void 0!==e&&e.amount&&e.complete?{amount:e.amount}:void 0;this.subviews[i].jerkIt&&this.subviews[i].jerkIt(s)}},__updateJerkiness:function(){0!=this.jerkiness&&(this.jerkiness!=this.originalJerkiness?this.originalJerkiness<this.jerkiness?(this.jerkiness-=this.defaultJerkinessBumpIncrease,this.jerkiness<this.originalJerkiness&&(this.jerkiness=this.originalJerkiness)):(this.jerkiness+=this.defaultJerkinessBumpIncrease,this.jerkiness>this.originalJerkiness&&(this.jerkiness=this.originalJerkiness)):void 0!==this.__jerkItCallback&&(this.__jerkItCallback(),this.__jerkItCallback=void 0))},draw:function(){this.__updateJerkiness(),s.prototype.draw.apply(this,arguments)}});return n}),h("squiggle/views/animation/BaseRender",["require","exports","module","squiggle/models/Frame","squiggle/views/primitives/DrawView","squiggle/models/AppSettings"],function(e,t,i){var s=(e("squiggle/models/Frame"),e("squiggle/views/primitives/DrawView")),n=e("squiggle/models/AppSettings"),r=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.strokeColor=n.defaultStrokeColor,this.strokeWeight=n.defaultStrokeWeight,this.initProperties([{name:"width",value:0},{name:"height",value:0},{name:"workerScript",value:"gif.worker.js"},{name:"overrideLineStrokeProperties",value:!1}])},__getImageData:function(e){var t,i,s;return s=this.sketch.createGraphics(this.width,this.height),s.background(255),this.__drawFrame(e,s,!1),t=s.elt,i=t.getContext("2d"),i.getImageData(0,0,this.width,this.height)},__drawFrame:function(e,t,i){var s,n,r=0,o=0;if(void 0===t&&(t=this.sketch),(void 0===i||i)&&(r=this.offsetX+this.x,o=this.offsetY+this.y),void 0===e)throw this.constructor.name+" ("+this.cid+") no Model set.";s=e.get("lines"),t.noFill();for(var h in s){n=s[h],this.overrideLineStrokeProperties?this.applyStrokeProperties(t,this):this.applyStrokeProperties(t,n.exportStrokeProperties()),t.beginShape();for(var a in n.get("points"))t.vertex(r+s[h].get("points")[a][0],o+s[h].get("points")[a][1]);t.endShape()}}});return r}),function(e){function t(e,i){if({}.hasOwnProperty.call(t.cache,e))return t.cache[e];var s=t.resolve(e);if(!s)throw new Error("Failed to resolve module "+e);var n={id:e,require:t,filename:e,exports:{},loaded:!1,parent:i,children:[]};i&&i.children.push(n);var r=e.slice(0,e.lastIndexOf("/")+1);return t.cache[e]=n.exports,s.call(n.exports,n,n.exports,r,e),n.loaded=!0,t.cache[e]=n.exports}t.modules={},t.cache={},t.resolve=function(e){return{}.hasOwnProperty.call(t.modules,e)?t.modules[e]:void 0},t.define=function(e,i){t.modules[e]=i};var i=function(t){return t="/",{title:"browser",version:"v0.10.26",browser:!0,env:{},argv:[],nextTick:e.setImmediate||function(e){setTimeout(e,0)},cwd:function(){return t},chdir:function(e){t=e}}}();t.define("/gif.coffee",function(e,i,s,n){function r(e,t){return{}.hasOwnProperty.call(e,t)}function o(e,t){for(var i=0,s=t.length;s>i;++i)if(i in t&&t[i]===e)return!0;return!1}function h(e,t){function i(){this.constructor=e}for(var s in t)r(t,s)&&(e[s]=t[s]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e}var a,u,l,d,c;l=t("events",e).EventEmitter,a=t("/browser.coffee",e),c=function(e){function t(e){var t,i;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e);for(t in u)i=u[t],null!=this.options[t]?this.options[t]:this.options[t]=i}return h(t,e),u={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null},d={delay:500,copy:!1},t.prototype.setOption=function(e,t){return this.options[e]=t,null==this._canvas||"width"!==e&&"height"!==e?void 0:this._canvas[e]=t},t.prototype.setOptions=function(e){var t,i;return function(s){for(t in e)r(e,t)&&(i=e[t],s.push(this.setOption(t,i)));return s}.call(this,[])},t.prototype.addFrame=function(e,t){var i,s;null==t&&(t={}),i={},i.transparent=this.options.transparent;for(s in d)i[s]=t[s]||d[s];if(null!=this.options.width||this.setOption("width",e.width),null!=this.options.height||this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!=ImageData&&e instanceof ImageData)i.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!=CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!=WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?i.data=this.getContextData(e):i.context=e;else{if(null==e.childNodes)throw new Error("Invalid image");t.copy?i.data=this.getImageData(e):i.image=e}return this.frames.push(i)},t.prototype.render=function(){var e,t;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(t){for(var i=function(){var e;e=[];for(var t=0;0<=this.frames.length?t<this.frames.length:t>this.frames.length;0<=this.frames.length?++t:--t)e.push(t);return e}.apply(this,arguments),s=0,n=i.length;n>s;++s)e=i[s],t.push(null);return t}.call(this,[]),t=this.spawnWorkers();for(var i=function(){var e;e=[];for(var i=0;t>=0?t>i:i>t;t>=0?++i:--i)e.push(i);return e}.apply(this,arguments),s=0,n=i.length;n>s;++s)e=i[s],this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},t.prototype.abort=function(){for(var e;;){if(e=this.activeWorkers.shift(),!(null!=e))break;console.log("killing active worker"),e.terminate()}return this.running=!1,this.emit("abort")},t.prototype.spawnWorkers=function(){var e;return e=Math.min(this.options.workers,this.frames.length),function(){var t;t=[];for(var i=this.freeWorkers.length;this.freeWorkers.length<=e?e>i:i>e;this.freeWorkers.length<=e?++i:--i)t.push(i);return t}.apply(this,arguments).forEach(function(e){return function(t){var i;return console.log("spawning worker "+t),i=new Worker(e.options.workerScript),i.onmessage=function(e){return function(t){return e.activeWorkers.splice(e.activeWorkers.indexOf(i),1),e.freeWorkers.push(i),e.frameFinished(t.data)}}(e),e.freeWorkers.push(i)}}(this)),e},t.prototype.frameFinished=function(e){return console.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,o(null,this.imageParts)?this.renderNextFrame():this.finishRendering()},t.prototype.finishRendering=function(){var e,t,i,s,n,r,o;n=0;for(var h=0,a=this.imageParts.length;a>h;++h)t=this.imageParts[h],n+=(t.data.length-1)*t.pageSize+t.cursor;n+=t.pageSize-t.cursor,console.log("rendering finished - filesize "+Math.round(n/1e3)+"kb"),e=new Uint8Array(n),r=0;for(var u=0,l=this.imageParts.length;l>u;++u){t=this.imageParts[u];for(var d=0,c=t.data.length;c>d;++d)o=t.data[d],i=d,e.set(o,r),r+=i===t.data.length-1?t.cursor:t.pageSize}return s=new Blob([e],{type:"image/gif"}),this.emit("finished",s,e)},t.prototype.renderNextFrame=function(){var e,t,i;if(0===this.freeWorkers.length)throw new Error("No free workers");return this.nextFrame>=this.frames.length?void 0:(e=this.frames[this.nextFrame++],i=this.freeWorkers.shift(),t=this.getTask(e),console.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(i),i.postMessage(t))},t.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},t.prototype.getImageData=function(e){var t;return null!=this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),t=this._canvas.getContext("2d"),t.setFill=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},t.prototype.getTask=function(e){var t,i;if(t=this.frames.indexOf(e),i={index:t,last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,repeat:this.options.repeat,canTransfer:"chrome"===a.name},null!=e.data)i.data=e.data;else if(null!=e.context)i.data=this.getContextData(e.context);else{if(null==e.image)throw new Error("Invalid frame");i.data=this.getImageData(e.image)}return i},t}(l),e.exports=c}),t.define("/browser.coffee",function(e,t,i,s){var n,r,o,h,a;h=navigator.userAgent.toLowerCase(),o=navigator.platform.toLowerCase(),a=h.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],r="ie"===a[1]&&document.documentMode,n={name:"version"===a[1]?a[3]:a[1],version:r||parseFloat("opera"===a[1]&&a[4]?a[4]:a[2]),platform:{name:h.match(/ip(?:ad|od|hone)/)?"ios":(h.match(/(?:webos|android)/)||o.match(/mac|win|linux/)||["other"])[0]}},n[n.name]=!0,n[n.name+parseInt(n.version,10)]=!0,n.platform[n.platform.name]=!0,e.exports=n}),t.define("events",function(e,t,s,n){i.EventEmitter||(i.EventEmitter=function(){});var r=t.EventEmitter=i.EventEmitter,o="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=10;r.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},r.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||o(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"!=typeof t){if(o(t)){for(var i=Array.prototype.slice.call(arguments,1),s=t.slice(),n=0,r=s.length;r>n;n++)s[n].apply(this,i);return!0}return!1}switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);t.apply(this,i)}return!0},r.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",e,t),this._events[e])if(o(this._events[e])){if(!this._events[e].warned){var i;i=void 0!==this._events.maxListeners?this._events.maxListeners:h,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];else this._events[e]=t;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){var i=this;return i.on(e,function s(){i.removeListener(e,s),t.apply(this,arguments)}),this},r.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var i=this._events[e];if(o(i)){var s=i.indexOf(t);if(0>s)return this;i.splice(s,1),0==i.length&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},r.prototype.removeAllListeners=function(e){return e&&this._events&&this._events[e]&&(this._events[e]=null),this},r.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}),e.GIF=t("/gif.coffee")}.call(this,this),h("gif",function(){}),h("squiggle/views/animation/AnimationRender",["require","exports","module","squiggle/views/animation/BaseRender","squiggle/models/Line","gif"],function(e,t,i){var s=e("squiggle/views/animation/BaseRender"),n=(e("squiggle/models/Line"),e("gif"),s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.__currentFrameIndex=0,this.__playing=!1,this.__frameDelayCounter=0,this.model=null,this.initProperties([{name:"frameDelay",value:1},{name:"exportFrameDelay",value:125}])},play:function(){return this.__playing=!0,this},pause:function(){return this.__playing=!1,this},stop:function(){return this.__playing=!1,this.__currentFrameIndex=0,this},gotoFrame:function(e){return null!=this.model.models[e]?this.__drawFrame(this.model.models[e]):console.log(this.getName()+": gotoFrame() ERROR : frame "+e+" does not exist."),this},setModel:function(e){return this.model=e,this},"export":function(e){var t=new window.GIF({workerScript:this.getWorkerScript()});for(index in this.model.models){var i=this.model.models[index],s=this.__getImageData(i);t.addFrame(s,{delay:this.exportFrameDelay})}t.on("finished",function(t){e(t)}),t.render()},draw:function(){null!=this.model&&(s.prototype.updateOffset.apply(this,arguments),s.prototype.draw.apply(this,arguments),this.gotoFrame(this.__currentFrameIndex),this.__playing&&(this.__frameDelayCounter++,this.__frameDelayCounter>=this.frameDelay&&(this.__frameDelayCounter=0,this.__currentFrameIndex++,this.__currentFrameIndex>=this.model.models.length&&(this.__currentFrameIndex=0))))}}));return n}),h("squiggle/views/primitives/Rectangle",["require","exports","module","squiggle/views/primitives/DrawView","squiggle/utils/MathUtils"],function(e,t,i){var s=e("squiggle/views/primitives/DrawView"),n=e("squiggle/utils/MathUtils"),r=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.initProperties([{name:"width",value:0},{name:"height",value:0},{name:"roundedCorners",value:[0,0,0,0]}]),this.closed=!0},draw:function(){if(!this.hidden&&(0!==this.width||0!==this.height)){var e=0,t=0,i=0,r=0;null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.applyStrokeProperties(),this.fill?this.sketch.fill(this.fillColor):this.sketch.noFill(),this.jerkiness>0&&(e=Math.random()*this.jerkiness*n.coinToss(),t=Math.random()*this.jerkiness*n.coinToss(),i=Math.random()*this.jerkiness*n.coinToss(),r=Math.random()*this.jerkiness*n.coinToss()),"number"==typeof this.roundedCorners&&(this.rc_tl=this.rc_tr=this.rc_br=this.rc_bl=this.roundedCorners),void 0!==this.roundedCorners[0]&&(this.rc_tl=this.roundedCorners[0]),void 0!==this.roundedCorners[1]&&(this.rc_tr=this.roundedCorners[1]),void 0!==this.roundedCorners[2]&&(this.rc_br=this.roundedCorners[2]),void 0!==this.roundedCorners[3]&&(this.rc_bl=this.roundedCorners[3]),this.sketch.rect(this.x+this.offsetX+e,this.y+this.offsetY+t,this.width+i,this.height+r,this.rc_tl,this.rc_tr,this.rc_br,this.rc_bl),s.prototype.draw.apply(this,arguments)}}});return r}),h("squiggle/views/animation/FrameCapture",["require","exports","module","squiggle/models/Frame","squiggle/models/Line","squiggle/views/primitives/Rectangle"],function(e,t,i){var s=e("squiggle/models/Frame"),n=e("squiggle/models/Line"),r=e("squiggle/views/primitives/Rectangle"),o=r.extend({initialize:function(e){r.prototype.initialize.apply(this,arguments),this.model=new s,this.__lineInProgress=null,this.initProperties([{name:"frameRender",value:null}]),this.setUserInteractionEnabled(!0)},clear:function(){return this.model.clear(),this},toJSON:function(){return this.model.toJSON()},__startActiveLine:function(){this.__lineInProgress=(new n).set("strokeColor",this.strokeColor).set("strokeWeight",this.strokeWeight).set("strokeCap",this.strokeCap).set("strokeJoin",this.strokeJoin)},getLineInProgress:function(){return this.__lineInProgress},__endActiveLine:function(){null!=this.__lineInProgress&&(0===this.__lineInProgress.get("points").length&&this.__addPointToActiveLine(this.__returnMousePositionWithoutOffset()),this.model.addLine(this.__lineInProgress),this.__lineInProgress=null)},__addPointToActiveLine:function(e){this.__lineInProgress.addPoint(e[0],e[1])},draw:function(){null!=this.frameRender&&this.frameRender.setModel(this.model).setLineInProgress(this.__lineInProgress)},isMouseInBounds:function(){return this.isMouseOverRectangle(this.offsetX+this.x,this.offsetY+this.y,this.offsetX+this.x+this.width,this.offsetY+this.y+this.height)},__returnMousePositionWithoutOffset:function(){return[this.sketch.mouseX-this.offsetX-this.x,this.sketch.mouseY-this.offsetY-this.y]},mouseMoved:function(){this.isMouseInBounds()||null!=this.__lineInProgress&&this.__endActiveLine()},mouseDragged:function(){this.isMouseInBounds()?null!=this.__lineInProgress?this.__addPointToActiveLine(this.__returnMousePositionWithoutOffset()):this.__startActiveLine():null!=this.__lineInProgress&&this.__endActiveLine()},mousePressed:function(){this.isMouseInBounds()&&this.__startActiveLine()},mouseReleased:function(){null!=this.__lineInProgress&&this.__endActiveLine()}});return o}),h("squiggle/views/animation/FrameRender",["require","exports","module","squiggle/views/animation/BaseRender"],function(e,t,i){var s=e("squiggle/views/animation/BaseRender"),n=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.__lineInProgress=void 0},setLineInProgress:function(e){return this.__lineInProgress=e,this},setModel:function(e){return this.model=e,this},draw:function(){if(this.model&&!this.hidden){if(s.prototype.updateOffset.apply(this,arguments),s.prototype.draw.apply(this,arguments),this.__drawFrame(this.model),this.__lineInProgress){this.sketch.noFill(),this.sketch.beginShape(),this.applyStrokeProperties(this.sketch,this.__lineInProgress.exportStrokeProperties());for(var e in this.__lineInProgress.get("points"))this.sketch.vertex(this.offsetX+this.x+this.__lineInProgress.get("points")[e][0],this.offsetY+this.y+this.__lineInProgress.get("points")[e][1]);this.sketch.endShape()}}},"export":function(e){var t=this.__getImageData(this.model),i=new window.GIF({workerScript:this.getWorkerScript()});i.addFrame(t),i.on("finished",function(t){e(t)}),i.render()}});return n}),h("squiggle/views/primitives/Path",["require","exports","module","squiggle/views/primitives/DrawView","squiggle/utils/MathUtils"],function(e,t,i){var s=e("squiggle/views/primitives/DrawView"),n=e("squiggle/utils/MathUtils"),r=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.points=[]},addPoint:function(e,t){return this.points.push([e,t]),this},clearPoints:function(){return this.points=[],this},draw:function(){var e=0,t=0;if(!this.hidden){null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.applyStrokeProperties(),this.fill?this.sketch.fill(this.fillColor):this.sketch.noFill(),this.sketch.beginShape();for(var i in this.points)this.jerkiness>0&&(e=Math.random()*this.jerkiness*n.coinToss(),t=Math.random()*this.jerkiness*n.coinToss()),this.sketch.vertex(this.offsetX+this.x+this.points[i][0]+e,this.offsetY+this.y+this.points[i][1]+t);this.closed?this.sketch.endShape(this.sketch.CLOSE):this.sketch.endShape(),s.prototype.draw.apply(this,arguments)}}});return r}),h("squiggle/views/primitives/DashedLine",["require","exports","module","squiggle/views/primitives/Path","squiggle/utils/MathUtils"],function(e,t,i){var s=e("squiggle/views/primitives/Path"),n=e("squiggle/utils/MathUtils"),r=s.extend({initialize:function(e){return s.prototype.initialize.apply(this,arguments),this.stepCounter=0,this.step=!0,this.initProperties([{name:"spacing",value:[8,8]},{name:"steps",value:60}]),this},drawDashedLine:function(e,t,i,s,r,o){var h=this.sketch.dist(e,t,i,s),a=[],u=[],l=0,d=0;if(h>0){for(d=0;d<r.length;d++)a[d]=this.sketch.lerp(0,i-e,r[d]/h),u[d]=this.sketch.lerp(0,s-t,r[d]/h);for(d=0;h>l;){if(o){var c=0,g=0,p=0,f=0;0!=this.jerkiness&&(c=Math.random()*this.jerkiness*n.coinToss(),g=Math.random()*this.jerkiness*n.coinToss(),p=Math.random()*this.jerkiness*n.coinToss(),f=Math.random()*this.jerkiness*n.coinToss()),this.sketch.line(e+c,t+g,e+a[d]+p,t+u[d]+f)}e+=a[d],t+=u[d],l+=this.sketch.mag(a[d],u[d]),d=(d+1)%r.length,o=!o}}},draw:function(){if(null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.points.length>1){this.applyStrokeProperties();for(var e=0;e<this.points.length;e++)void 0!=this.points[e+1]&&this.drawDashedLine(this.points[e][0],this.points[e][1],this.points[e+1][0],this.points[e+1][1],this.spacing,this.step);this.stepCounter++,this.stepCounter===this.steps&&(this.step=!this.step,this.stepCounter=0)}}});return r}),h("squiggle/views/screens/Screen",["require","exports","module","squiggle/views/View"],function(e,t,i){var s=e("squiggle/views/View"),n=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.__wasSetup=!1,this.backgroundColor="White"},__setup:function(){this.__wasSetup=!0,this.setup()},__draw:function(){this.__wasSetup||this.__setup(),null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),null!=this.backgroundColor&&this.sketch.background(this.backgroundColor),s.prototype.draw.apply(this,arguments),this.draw()},setup:function(){},draw:function(){},keyPressed:function(){for(var e in this.subviews){var t=this.subviews[e];t.userInteractionEnabled&&t.keyPressed.call(this.subviews[e])}},keyTyped:function(){for(var e in this.subviews){var t=this.subviews[e];t.userInteractionEnabled&&t.keyTyped.call(this.subviews[e])}},onValueInjected:function(e,t){}});return n}),h("squiggle/views/sprites/cursors/PencilCursor",["require","exports","module","squiggle/views/primitives/Path","squiggle/models/AppSettings"],function(e,t,i){var s=e("squiggle/views/primitives/Path"),n=e("squiggle/models/AppSettings"),r=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments);var t=5;this.setStrokeWeight(2),this.fillColor=n.defaultFillColor,this.addPoint(0,0),this.addPoint(t,0),this.addPoint(3*t,2*t),this.addPoint(2*t,3*t),this.addPoint(0,t)}});return r}),h("squiggle/views/text/BluePrints",["require","exports","module"],function(e,t,i){var s={_b:[{k:"",v:[]},{k:" ",v:[]},{k:"1",v:[[1,1],[2,22],[21,23]]},{k:"2",v:[[1,5],[5,10],[10,16],[16,21],[21,25]]},{k:"3",v:[[1,5],[5,25],[25,21],[-1,-1],[11,15]]},{k:"4",v:[[1,11],[11,15],[-2],[4,24]]},{k:"5",v:[[4,1],[1,11],[11,14],[14,20],[20,24],[24,21]]},{k:"6",v:[[5,1],[1,21],[21,25],[25,15],[15,11]]},{k:"7",v:[[1,3],[3,23],[-1,-1],[11,15]]},{k:"8",v:[[5,1],[1,21],[21,25],[25,5],[-1,-1],[11,15]]},{k:"9",v:[[1,5],[1,11],[11,15],[15,25],[25,21],[-1,-1],[5,15]]},{k:"0",v:[[5,1],[1,21],[21,25],[25,5],[-1,-1],[5,21]]},{k:"a",v:[[1,5],[5,25],[-1,-1],[1,21],[-1,-1],[11,15]]},{k:"b",v:[[1,21],[21,25],[25,15],[15,11],[-1,-1],[1,4],[4,14]]},{k:"c",v:[[1,5],[1,21],[21,25]]},{k:"d",v:[[1,21],[21,24],[24,20],[20,10],[10,4],[4,1]]},{k:"f",v:[[5,1],[1,21],[-1,-1],[11,14]]},{k:"e",v:[[5,1],[1,21],[21,25],[-1,-1],[11,14]]},{k:"g",v:[[5,1],[1,21],[21,25],[25,15],[15,13]]},{k:"h",v:[[1,21],[-1,-1],[11,15],[-1,-1],[5,25]]},{k:"k",v:[[1,21],[-1,-1],[5,11],[8,25]]},{k:"i",v:[[1,3],[2,22],[21,23]]},{k:"j",v:[[4,5],[5,25],[25,21]]},{k:"l",v:[[1,21],[21,25]]},{k:"m",v:[[21,1],[1,18],[18,5],[5,25]]},{k:"n",v:[[21,1],[1,25],[25,5]]},{k:"o",v:[[5,1],[1,21],[21,25],[25,5]]},{k:"p",v:[[11,15],[15,5],[5,1],[1,21]]},{k:"q",v:[[5,1],[1,21],[21,25],[25,5],[-1,-1],[18,28]]},{k:"r",v:[[11,15],[15,5],[5,1],[1,21],[-1,-1],[14,25]]},{k:"s",v:[[5,1],[1,11],[11,15],[15,25],[25,21]]},{k:"t",v:[[1,5],[-1,-1],[3,23]]},{k:"u",v:[[1,21],[21,25],[25,5]]},{k:"v",v:[[1,23],[23,5]]},{k:"w",v:[[1,22],[22,18],[18,24],[24,5]]},{k:"x",v:[[1,25],[-1,-1],[5,21]]},{k:"y",v:[[1,13],[13,23],[-1,-1],[13,5]]},{k:"z",v:[[1,5],[5,21],[21,25]]},{k:"!",v:[[2,12],[-1,-1],[17,22]]},{k:"?",v:[[28,23],[-1,-1],[18,13],[13,15],[15,5],[5,2],[2,6]]},{k:">",v:[[1,13],[13,21]]},{k:"+",v:[[3,23],[-1,-1],[11,15]]},{k:"*",v:[[3,23],[-1,-1],[11,15],[-1,-1],[1,25],[-1,-1],[5,21]]},{k:"=",v:[[6,10],[-1,-1],[16,20]]},{k:"-",v:[[11,15]]},{k:"(",v:[[2,6],[6,16],[16,22]]},{k:")",v:[[4,10],[10,20],[20,24]]},{k:".",v:[[22,22]]},{k:"/",v:[[21,3]]}],_wf:[{k:"!",v:3},{k:">",v:3},{k:"",v:0},{k:"i",v:3},{k:"1",v:3},{k:".",v:3},{k:"/",v:3}],getWidthFactor:function(e){for(var t=0;t<s._wf.length;t++)if(s._wf[t].k==e)return s._wf[t].v;return 5},getBluePrint:function(e){for(var t=0;t<s._b.length;t++)if(s._b[t].k==e)return s._b[t].v}};return s}),h("squiggle/views/text/Letter",["require","exports","module","squiggle/views/primitives/Path","squiggle/models/AppSettings","squiggle/views/text/BluePrints","squiggle/utils/MathUtils"],function(e,t,i){
var s=e("squiggle/views/primitives/Path"),n=e("squiggle/models/AppSettings"),r=e("squiggle/views/text/BluePrints"),o=e("squiggle/utils/MathUtils"),h=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.fontSize=16,this.strokeWeight=3,this.jerkiness=1,this.initProperties([{name:"blueprint",value:[]},{name:"widthFactor",value:5}]),this.positions=[],this.mustCalculatePositions=!0},setCharacter:function(e){e=e.toLowerCase();var t=r.getBluePrint(e);return void 0==t&&(e="*",t=r.getBluePrint(e)),t.push([-1,-1]),this.setBlueprint(t).setWidthFactor(r.getWidthFactor(e)),this},setFontSize:function(e){return e!==this.fontSize&&(this.fontSize=e,this.mustCalculatePositions=!0),this},pointIsSpace:function(e){return-1===this.points[e][0]&&-1===this.points[e][1]},calculatePositionsForFontSize:function(){this.positions=[],this.positions.push(void 0);var e=6,t=5,i=0;i=this.fontSize/t;for(var s=0;e>s;s++)for(var n=0;t>n;n++)this.positions.push([n*i,s*i]);this.mustCalculatePositions=!1},draw:function(){var e,t,i,r,h=!1,a=this.strokeColor,u=this.strokeWeight,l=0,d=0;if(null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.mustCalculatePositions){this.calculatePositionsForFontSize(),this.points=[];for(var c=0;c<this.blueprint.length;c++)e=this.blueprint[c][0],i=this.positions[e],void 0!=i?this.addPoint(i[0],i[1]):this.addPoint(-1,-1),t=this.blueprint[c][1],r=this.positions[t],void 0!=r?this.addPoint(r[0],r[1]):this.addPoint(-1,-1)}if(this.debug&&this.points.length>1&&(this.setStrokeColor(n.defaultStrokeColor).setStrokeWeight(n.defaultStrokeWeight).applyStrokeProperties(),this.sketch.line(this.x+this.offsetX+this.positions[1][0],this.y+this.offsetY+this.positions[1][1],this.x+this.offsetX+this.positions[5][0],this.y+this.offsetY+this.positions[5][1]),this.sketch.line(this.x+this.offsetX+this.positions[21][0],this.y+this.offsetY+this.positions[21][1],this.x+this.offsetX+this.positions[25][0],this.y+this.offsetY+this.positions[25][1]),this.sketch.line(this.x+this.offsetX+this.positions[1][0],this.y+this.offsetY+this.positions[1][1],this.x+this.offsetX+this.positions[21][0],this.y+this.offsetY+this.positions[21][1]),this.sketch.line(this.x+this.offsetX+this.positions[5][0],this.y+this.offsetY+this.positions[5][1],this.x+this.offsetX+this.positions[25][0],this.y+this.offsetY+this.positions[25][1])),this.points.length>1){this.setStrokeColor(a).setStrokeWeight(u).applyStrokeProperties(),this.sketch.strokeJoin(this.sketch.BEVEL);for(var c=0;c<this.points.length;c++)0==c&&(this.sketch.noFill(),this.sketch.beginShape(),h=!0),this.pointIsSpace(c)?(h&&(this.sketch.endShape(),h=!1),this.sketch.noFill(),this.sketch.beginShape(),h=!0):(l=Math.random()*this.jerkiness*o.coinToss(),d=Math.random()*this.jerkiness*o.coinToss(),this.sketch.vertex(this.x+this.offsetX+l+this.points[c][0],this.y+this.offsetY+d+this.points[c][1]))}}});return h.widthFactorDivider=5,h}),h("squiggle/views/text/Word",["require","exports","module","squiggle/views/primitives/DrawView","squiggle/views/text/Letter"],function(e,t,i){var s=e("squiggle/views/primitives/DrawView"),n=e("squiggle/views/text/Letter"),r=s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.w="",this.jerkiness=2,this.initProperties([{name:"fontSize",value:24}])},setFontColor:function(e){return this.strokeColor=e,this},setText:function(e){var t=0,i=null;this.removeAllSubviews(),this.w=e;for(var s=0,r=e.length;r>s;s++)i=(new n).setCharacter(e[s]).setPosition(t,0),t+=this.fontSize/n.widthFactorDivider*i.widthFactor+this.fontSize/n.widthFactorDivider*2,this.addSubview(i);return this},getText:function(){return this.w},getWidth:function(){if(this.subviews.length>0){var e=this.subviews[this.subviews.length-1];return e.getX()+this.fontSize/n.widthFactorDivider*e.widthFactor}return 0},draw:function(){if(!this.hidden){null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.__updateJerkiness();for(var e in this.subviews)this.subviews[e].debug=this.debug,this.subviews[e].setFontSize(this.fontSize).setJerkiness(this.jerkiness).setStrokeColor(this.strokeColor).setStrokeWeight(this.strokeWeight),this.subviews[e].draw([this.x+this.offsetX,this.y+this.offsetY])}},centerHorizontalOnWindow:function(){return this.x=window.innerWidth/2-this.getWidth()/2,this},centerVerticalOnWindow:function(){return this.y=window.innerHeight/2-this.fontSize/2,this},centerOnWindow:function(){return this.centerVerticalOnWindow(),this.centerHorizontalOnWindow(),this}});return r}),h("squiggle/views/ui/Button",["require","exports","module","squiggle/views/text/Word","squiggle/views/primitives/DrawView","squiggle/views/primitives/Path","squiggle/views/primitives/Rectangle","squiggle/models/AppSettings"],function(e,t,i){var s=e("squiggle/views/text/Word"),n=e("squiggle/views/primitives/DrawView"),r=e("squiggle/views/primitives/Path"),o=e("squiggle/views/primitives/Rectangle"),h=e("squiggle/models/AppSettings"),a=n.extend({initialize:function(e){n.prototype.initialize.apply(this,arguments);var t,i;this.initProperties([{name:"padding",value:8},{name:"showUnderline",value:!0},{name:"autoAdjustSize",value:!0}]),this.height=0,this.width=0,this.__s=a.states.NORMAL,t=h.defaultStrokeColor,i=h.defaultFillColor,this.__fc={},this.__fc[a.states.NORMAL]=t,this.__fc[a.states.HOVER]=t,this.__fc[a.states.DOWN]=t,this.__bc={},this.__bc[a.states.NORMAL]=i,this.__bc[a.states.HOVER]=i,this.__bc[a.states.DOWN]=i,this.__r=(new o).setJerkiness(.5).setStrokeWeight(0).setFillColor(this.__bc[a.states.NORMAL]),this.__w=(new s).setJerkiness(.5).setFontSize(14).setPosition(this.padding,this.padding).setFontColor(this.__fc[a.states.NORMAL]),this.__l=(new r).setStrokeWeight(1).setJerkiness(.5).setPosition(this.padding,this.padding).setHidden(!0).setStrokeColor(this.__fc[a.states.NORMAL]),this.userInteractionEnabled=!0,this.pressed=!1,this.addSubview(this.__r),this.addSubview(this.__w),this.addSubview(this.__l)},setText:function(e){this.__w.setText(e).setFontColor(this.__fc[a.states.NORMAL]);var t,i;return""===e?this.getAutoAdjustSize()&&this.__r.setWidth(this.width).setHeight(this.height):(t=this.__w.getWidth(),i=this.__w.fontSize,this.__l.clearPoints().addPoint(0,i+this.padding/2).addPoint(t,i+this.padding/2),this.getAutoAdjustSize()&&(this.__r.setWidth(t+2*this.padding).setHeight(i+2*this.padding),this.width=this.__r.width,this.height=this.__r.height)),this.centerWord(),this},jerkIt:function(e){this.__r.jerkIt(e);var t=void 0!==e&&e.amount&&e.complete?{amount:e.amount}:void 0;for(var i in this.subviews)this.subviews[i].jerkIt&&this.subviews[i]!==this.__r&&this.subviews[i].jerkIt(t)},setFontColorForState:function(e,t){return void 0!==this.__fc[t]&&(this.__fc[t]=e),this.___ucs(this.__s),this},setBackgroundColorForState:function(e,t){return void 0!==this.__bc[t]&&(this.__bc[t]=e),t===this.__s&&this.___ucs(this.__s),this},setWidth:function(e){return this.width=e,this.__r.setWidth(this.width),this.centerWord(),this},setHeight:function(e){return this.height=e,this.__r.setHeight(this.height),this.centerWord(),this},getBackgroundRectangle:function(){return this.__r},getWord:function(){return this.__w},getFontSize:function(){return this.__w.getFontSize()},setFontSize:function(e){return this.__w.setFontSize(e),this.centerWord(),this},isMouseInBounds:function(){return this.isMouseOverRectangle(this.offsetX+this.x,this.offsetY+this.y,this.offsetX+this.x+this.width,this.offsetY+this.y+this.height)},draw:function(){null!=arguments[0]&&n.prototype.updateOffset.apply(this,arguments),this.hidden||(this.__l.hidden=!this.showUnderline,n.prototype.draw.apply(this,arguments))},mouseMoved:function(){this.__l.setHidden(!this.isMouseInBounds()),this.isMouseInBounds()?(this.__s=a.states.HOVER,this.___ucs(this.__s)):(this.pressed=!1,this.__s=a.states.NORMAL,this.___ucs(this.__s))},___ucs:function(e){this.__l.setStrokeColor(this.__bc[e]),this.__r.setFillColor(this.__bc[e]),this.__w.setFontColor(this.__fc[e])},mousePressed:function(){this.isMouseInBounds()&&(this.pressed=!0,this.__s=a.states.DOWN,this.___ucs(this.__s),this.trigger(a.events.PRESSED,this))},mouseReleased:function(){this.isMouseInBounds()&&this.pressed&&(this.__s=a.states.NORMAL,this.___ucs(this.__s),this.trigger(a.events.CLICKED,this)),this.pressed=!1},centerHorizontalOnWindow:function(){return this.x=window.innerWidth/2-this.width/2,this},centerVerticalOnWindow:function(){return this.y=window.innerHeight/2-this.fontSize/2,this},centerOnWindow:function(){return this.centerVerticalOnWindow(),this.centerHorizontalOnWindow(),this},centerWord:function(){return this.__w.setPosition(this.width/2-this.__w.getWidth()/2,this.__r.height/2-this.getFontSize()/2),this}});return a.events={PRESSED:"BUTTON_PRESS",CLICKED:"BUTTON_CLICKED"},a.states={NORMAL:"NORMAL",HOVER:"HOVER",DOWN:"DOWN"},a}),h("squiggle",["require","p5","squiggle/models/AppSettings","squiggle/models/Animation","squiggle/models/Frame","squiggle/models/Line","squiggle/utils/MathUtils","squiggle/views/View","squiggle/views/animation/AnimationRender","squiggle/views/animation/AnimationRender","squiggle/views/animation/FrameCapture","squiggle/views/animation/FrameRender","squiggle/views/primitives/DashedLine","squiggle/views/primitives/DrawView","squiggle/views/primitives/Path","squiggle/views/primitives/Rectangle","squiggle/views/screens/Screen","squiggle/views/sprites/cursors/PencilCursor","squiggle/views/text/Letter","squiggle/views/text/Word","squiggle/views/text/BluePrints","squiggle/views/ui/Button"],function(e){"use strict";var t=e("p5"),i=e("squiggle/models/AppSettings"),s=e("squiggle/models/Animation"),n=e("squiggle/models/Frame"),r=e("squiggle/models/Line"),o=e("squiggle/utils/MathUtils"),h=e("squiggle/views/View"),a=e("squiggle/views/animation/AnimationRender"),u=e("squiggle/views/animation/AnimationRender"),l=e("squiggle/views/animation/FrameCapture"),d=e("squiggle/views/animation/FrameRender"),c=e("squiggle/views/primitives/DashedLine"),g=e("squiggle/views/primitives/DrawView"),p=e("squiggle/views/primitives/Path"),f=e("squiggle/views/primitives/Rectangle"),v=e("squiggle/views/screens/Screen"),m=e("squiggle/views/sprites/cursors/PencilCursor"),w=e("squiggle/views/text/Letter"),_=e("squiggle/views/text/Word"),k=e("squiggle/views/text/BluePrints"),y=e("squiggle/views/ui/Button");return{models:{AppSettings:i,Animation:s,Frame:n,Line:r},views:{View:h,animation:{BaseRender:a,AnimationRender:u,FrameCapture:l,FrameRender:d},primitives:{DashedLine:c,DrawView:g,Path:p,Rectangle:f},screens:{Screen:v},sprites:{cursors:{PencilCursor:m}},text:{Letter:w,Word:_,BluePrints:k},ui:{Button:y}},utils:{MathUtils:o},version:"1.1.4",screen:void 0,sketch:void 0,injectValue:function(e,t){void 0!==this.screen&&this.screen.onValueInjected(e,t)},init:function(){var e=this;new t(function(t){i.sketch=t,e.sketch=t,t.setup=function(){t.frameRate(30),t.createCanvas(window.innerWidth,window.innerHeight)},t.draw=function(){void 0!==e.screen&&e.screen.__draw(arguments)},t.mousePressed=function(){void 0!==e.screen&&e.screen.mousePressed()},t.mouseReleased=function(){void 0!==e.screen&&e.screen.mouseReleased()},t.mouseMoved=function(){void 0!==e.screen&&e.screen.mouseMoved()},t.mouseDragged=function(){void 0!==e.screen&&e.screen.mouseDragged()},t.keyPressed=function(){void 0!==e.screen&&e.screen.keyPressed()},t.keyTyped=function(){void 0!==e.screen&&e.screen.keyTyped()},t.windowResized=function(){t.resizeCanvas(window.innerWidth,window.innerHeight),void 0!==e.screen&&e.screen.windowResized()}},"sketch-div")}}}),h("jquery",function(){return e}),h("underscore",function(){return t}),h("backbone",function(){return s}),h("p5",function(){return n}),o("squiggle")});