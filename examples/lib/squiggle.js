!function(t,e){"function"==typeof define&&define.amd?define(["jquery","underscore","backbone","p5"],e):t.squiggle=e(t.$,t._,t.Backbone,t.p5)}(this,function(t,e,s,n){var r,o,h;return function(t){function e(t,e){var i,s,n,r,o,h,a,u,l,c,d=e&&e.split("/"),g=p.map,f=g&&g["*"]||{};if(t&&"."===t.charAt(0)&&e){for(d=d.slice(0,d.length-1),t=d.concat(t.split("/")),u=0;c=t[u];u++)if("."===c)t.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===t[2]||".."===t[0]))return!0;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((d||f)&&g){for(i=t.split("/"),u=i.length;u>0;u-=1){if(s=i.slice(0,u).join("/"),d)for(l=d.length;l>0;l-=1)if(n=g[d.slice(0,l).join("/")],n&&(n=n[s])){r=n,o=u;break}if(r)break;!h&&f&&f[s]&&(h=f[s],a=u)}!r&&h&&(r=h,o=a),r&&(i.splice(0,o,r),t=i.join("/"))}return t}function i(e,i){return function(){return d.apply(t,m.call(arguments,0).concat([e,i]))}}function s(t){return function(i){return e(i,t)}}function n(t){return function(e){g[t]=e}}function a(e){if(f.hasOwnProperty(e)){var i=f[e];delete f[e],v[e]=!0,c.apply(t,i)}if(!g.hasOwnProperty(e))throw new Error("No "+e);return g[e]}function u(t,i){var n,r,o=t.indexOf("!");return-1!==o?(n=e(t.slice(0,o),i),t=t.slice(o+1),r=a(n),t=r&&r.normalize?r.normalize(t,s(i)):e(t,i)):t=e(t,i),{f:n?n+"!"+t:t,n:t,p:r}}function l(t){return function(){return p&&p.config&&p.config[t]||{}}}var c,d,g={},f={},p={},v={},m=[].slice;c=function(e,s,r,o){var h,c,d,p,m,_,w=[];if(o=o||e,"function"==typeof r){for(s=!s.length&&r.length?["require","exports","module"]:s,_=0;_<s.length;_++)if(m=u(s[_],o),d=m.f,"require"===d)w[_]=i(e);else if("exports"===d)w[_]=g[e]={},h=!0;else if("module"===d)c=w[_]={id:e,uri:"",exports:g[e],config:l(e)};else if(g.hasOwnProperty(d)||f.hasOwnProperty(d))w[_]=a(d);else if(m.p)m.p.load(m.n,i(o,!0),n(d),{}),w[_]=g[d];else if(!v[d])throw new Error(e+" missing "+d);p=r.apply(g[e],w),e&&(c&&c.exports!==t&&c.exports!==g[e]?g[e]=c.exports:p===t&&h||(g[e]=p))}else e&&(g[e]=r)},r=o=d=function(e,i,s,n){return"string"==typeof e?a(u(e,i).f):(e.splice||(p=e,i.splice?(e=i,i=s,s=null):e=t),i=i||function(){},n?c(t,e,i,s):setTimeout(function(){c(t,e,i,s)},15),d)},d.config=function(t){return p=t,d},h=function(t,e,i){e.splice||(i=e,e=[]),f[t]=[t,e,i]},h.amd={jQuery:!0}}(),h("../tools/almond",function(){}),h("squiggle/models/AppSettings",["require","exports","module"],function(t,e,i){var s={sketch:null,defaultStrokeColor:"Black",defaultFillColor:"Red",defaultStrokeWeight:2};return s}),h("squiggle/models/Frame",["require","exports","module","backbone"],function(t,e,i){var s=t("backbone"),n=s.Model.extend({initialize:function(){this.set("lines",[])},addLine:function(t){this.get("lines").push(t),this.trigger("change")},clear:function(){this.set("lines",[]),this.trigger("change")}});return n}),h("squiggle/models/Animation",["require","exports","module","backbone","squiggle/models/Frame"],function(t,e,i){var s=t("backbone"),n=t("squiggle/models/Frame"),r=s.Collection.extend({model:n});return r}),h("squiggle/models/Line",["require","exports","module","backbone","squiggle/models/AppSettings"],function(t,e,i){var s=t("backbone"),n=t("squiggle/models/AppSettings"),r=s.Model.extend({initialize:function(){var t=n.sketch;this.set("strokeColor",n.defaultStrokeColor).set("strokeWeight",n.defaultStrokeWeight).set("points",[]),void 0!==t&&this.set("strokeCap",t.SQUARE).set("strokeJoin",t.MITER)},addPoint:function(t,e){this.get("points").push([t,e]),this.trigger("change")},clear:function(){this.set("points",[]).trigger("change")},exportStrokeProperties:function(){return ob={strokeColor:this.get("strokeColor"),strokeWeight:this.get("strokeWeight")},void 0!==this.get("strokeCap")&&(ob.strokeCap=this.get("strokeCap")),void 0!==this.get("strokeJoin")&&(ob.strokeCap=this.get("strokeJoin")),ob}});return r}),h("squiggle/utils/MathUtils",["require","exports","module"],function(t,e,i){var s={coinToss:function(){return 1*Math.random()>.5?1:-1}};return s}),h("squiggle/views/View",["require","exports","module","backbone","underscore","squiggle/models/AppSettings"],function(t,e,s){var n=t("backbone"),r=t("underscore"),o=t("squiggle/models/AppSettings"),h=n.View.extend({initialize:function(t){if(null===t||void 0===t?this.sketch=o.sketch:this.sketch=t,void 0===this.sketch)throw new Error("no sketch defined");this.subviews=[],this.parent=null,this.debug=!1,this.initProperties([{name:"x",value:0},{name:"y",value:0},{name:"offsetX",value:0},{name:"offsetY",value:0},{name:"hidden",value:!1},{name:"userInteractionEnabled",value:!1}])},windowResized:function(){for(var t in this.subviews){var e=this.subviews[t];e.windowResized&&e.windowResized.call(this.subviews[t])}},log:function(t){this.debug&&console.log(this.constructor.name+" ("+this.cid+") "+t)},isMouseOverRectangle:function(t,e,i,s){return this.sketch.mouseX>t&&this.sketch.mouseX<i&&this.sketch.mouseY>e&&this.sketch.mouseY<s},isTouchOverRectangle:function(t,e,i,s){return this.sketch.touchX>t&&this.sketch.touchX<i&&this.sketch.touchY>e&&this.sketch.touchY<s},initProperties:function(t){r.each(t,function(t){if(!t.name||void 0===t.value)throw new Error("initProperties() parameters require an Object with properties 'name' and 'value'");this.createGetter(t.name),this.createSetter(t.name),this["set"+(t.name.charAt(0).toUpperCase()+t.name.slice(1))].call(this,t.value)}.bind(this))},createSetter:function(t){this["set"+(t.charAt(0).toUpperCase()+t.slice(1))]=function(e){return this[t]=e,this}},createGetter:function(t){this["get"+(t.charAt(0).toUpperCase()+t.slice(1))]=function(){return this[t]}},setPosition:function(t,e){return this.setX(t).setY(e)},addSubview:function(){var t;for(i=0;i<arguments.length;i++)t=arguments[i],r.has(t,"parent")?(t.parent&&t.parent.removeSubview(t),t.parent=this,this.subviews.push(t)):console.log("Warning : "+t+" has no parent?");return this},removeSubview:function(){var t;for(i=0;i<arguments.length;i++){t=arguments[i];for(var e in this.subviews)this.subviews[e]!==t||(t.parent=null,this.subviews.splice(e,1))}return this},removeAllSubviews:function(){return r.each(this.subviews,function(t){t.parent=void 0}),this.subviews=[],this},draw:function(){this.hidden||r.each(this.subviews,function(t){t.draw([this.x+this.offsetX,this.y+this.offsetY])}.bind(this))},updateOffset:function(t){void 0!=t[0]&&(this.offsetX=t[0],this.offsetY=t[1])},__callonSubviewsIfUIE:function(t){r.each(this.subviews,function(e){e.userInteractionEnabled&&"function"==typeof e[t]&&e[t].call(e)})},mouseMoved:function(){this.__callonSubviewsIfUIE("mouseMoved")},mouseDragged:function(){this.__callonSubviewsIfUIE("mouseDragged")},mousePressed:function(){this.__callonSubviewsIfUIE("mousePressed")},mouseReleased:function(){this.__callonSubviewsIfUIE("mouseReleased")},touchStarted:function(){this.__callonSubviewsIfUIE("touchStarted")},touchMoved:function(){this.__callonSubviewsIfUIE("touchMoved")},touchEnded:function(){this.__callonSubviewsIfUIE("touchEnded")}});return h}),h("squiggle/views/primitives/DrawView",["require","exports","module","squiggle/views/View"],function(t,e,i){var s=t("squiggle/views/View"),n=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.initProperties([{name:"strokeColor",value:"rgba(0,0,0,1.0)"},{name:"strokeWeight",value:4},{name:"strokeCap",value:this.sketch.SQUARE},{name:"strokeJoin",value:this.sketch.MITER},{name:"fill",value:!0},{name:"closed",value:!0},{name:"defaultJerkinessBump",value:10},{name:"defaultJerkinessBumpIncrease",value:1},{name:"fillColor",value:"rgba(255,0,0,1.0)"}]),this.__jerkItCallback=void 0,this.jerkiness=.5,this.setJerkiness(.5)},applyStrokeProperties:function(t,e){return void 0===t&&(t=this.sketch),void 0===e&&(e=this),void 0!==e.strokeCap&&t.strokeCap(e.strokeCap),void 0!==e.strokeJoin&&t.strokeJoin(e.strokeJoin),t.strokeWeight(e.strokeWeight),t.stroke(e.strokeColor),this},setJerkiness:function(t){return this.jerkiness=t,this.originalJerkiness=t,this},getJerkiness:function(){return this.jerkiness},jerkIt:function(t){var e;void 0===t?e=this.defaultJerkinessBump:(e=void 0===t.amount?this.defaultJerkinessBump:t.amount,void 0!==t.complete&&"function"==typeof t.complete&&(this.__jerkItCallback=t.complete)),this.jerkiness=e;for(var i in this.subviews){var s=void 0!==t&&t.amount&&t.complete?{amount:t.amount}:void 0;this.subviews[i].jerkIt&&this.subviews[i].jerkIt(s)}},__updateJerkiness:function(){0!=this.jerkiness&&(this.jerkiness!=this.originalJerkiness?this.originalJerkiness<this.jerkiness?(this.jerkiness-=this.defaultJerkinessBumpIncrease,this.jerkiness<this.originalJerkiness&&(this.jerkiness=this.originalJerkiness)):(this.jerkiness+=this.defaultJerkinessBumpIncrease,this.jerkiness>this.originalJerkiness&&(this.jerkiness=this.originalJerkiness)):void 0!==this.__jerkItCallback&&(this.__jerkItCallback(),this.__jerkItCallback=void 0))},draw:function(){this.__updateJerkiness(),s.prototype.draw.apply(this,arguments)}});return n}),h("squiggle/views/animation/BaseRender",["require","exports","module","squiggle/models/Frame","squiggle/views/primitives/DrawView","squiggle/models/AppSettings"],function(t,e,i){var s=(t("squiggle/models/Frame"),t("squiggle/views/primitives/DrawView")),n=t("squiggle/models/AppSettings"),r=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.strokeColor=n.defaultStrokeColor,this.strokeWeight=n.defaultStrokeWeight,this.initProperties([{name:"width",value:0},{name:"height",value:0},{name:"workerScript",value:"gif.worker.js"},{name:"overrideLineStrokeProperties",value:!1}])},__getImageData:function(t){var e,i,s;return s=this.sketch.createGraphics(this.width,this.height),s.background(255),this.__drawFrame(t,s,!1),e=s.elt,i=e.getContext("2d"),i.getImageData(0,0,this.width,this.height)},__drawFrame:function(t,e,i){var s,n,r=0,o=0;if(void 0===e&&(e=this.sketch),(void 0===i||i)&&(r=this.offsetX+this.x,o=this.offsetY+this.y),void 0===t)throw this.constructor.name+" ("+this.cid+") no Model set.";s=t.get("lines"),e.noFill();for(var h in s){n=s[h],this.overrideLineStrokeProperties?this.applyStrokeProperties(e,this):this.applyStrokeProperties(e,n.exportStrokeProperties()),e.beginShape();for(var a in n.get("points"))e.vertex(r+s[h].get("points")[a][0],o+s[h].get("points")[a][1]);e.endShape()}}});return r}),function(t){function e(t,i){if({}.hasOwnProperty.call(e.cache,t))return e.cache[t];var s=e.resolve(t);if(!s)throw new Error("Failed to resolve module "+t);var n={id:t,require:e,filename:t,exports:{},loaded:!1,parent:i,children:[]};i&&i.children.push(n);var r=t.slice(0,t.lastIndexOf("/")+1);return e.cache[t]=n.exports,s.call(n.exports,n,n.exports,r,t),n.loaded=!0,e.cache[t]=n.exports}e.modules={},e.cache={},e.resolve=function(t){return{}.hasOwnProperty.call(e.modules,t)?e.modules[t]:void 0},e.define=function(t,i){e.modules[t]=i};var i=function(e){return e="/",{title:"browser",version:"v0.10.26",browser:!0,env:{},argv:[],nextTick:t.setImmediate||function(t){setTimeout(t,0)},cwd:function(){return e},chdir:function(t){e=t}}}();e.define("/gif.coffee",function(t,i,s,n){function r(t,e){return{}.hasOwnProperty.call(t,e)}function o(t,e){for(var i=0,s=e.length;s>i;++i)if(i in e&&e[i]===t)return!0;return!1}function h(t,e){function i(){this.constructor=t}for(var s in e)r(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var a,u,l,c,d;l=e("events",t).EventEmitter,a=e("/browser.coffee",t),d=function(t){function e(t){var e,i;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t);for(e in u)i=u[e],null!=this.options[e]?this.options[e]:this.options[e]=i}return h(e,t),u={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null},c={delay:500,copy:!1},e.prototype.setOption=function(t,e){return this.options[t]=e,null==this._canvas||"width"!==t&&"height"!==t?void 0:this._canvas[t]=e},e.prototype.setOptions=function(t){var e,i;return function(s){for(e in t)r(t,e)&&(i=t[e],s.push(this.setOption(e,i)));return s}.call(this,[])},e.prototype.addFrame=function(t,e){var i,s;null==e&&(e={}),i={},i.transparent=this.options.transparent;for(s in c)i[s]=e[s]||c[s];if(null!=this.options.width||this.setOption("width",t.width),null!=this.options.height||this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!=ImageData&&t instanceof ImageData)i.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!=CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!=WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?i.data=this.getContextData(t):i.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?i.data=this.getImageData(t):i.image=t}return this.frames.push(i)},e.prototype.render=function(){var t,e;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(e){for(var i=function(){var t;t=[];for(var e=0;0<=this.frames.length?e<this.frames.length:e>this.frames.length;0<=this.frames.length?++e:--e)t.push(e);return t}.apply(this,arguments),s=0,n=i.length;n>s;++s)t=i[s],e.push(null);return e}.call(this,[]),e=this.spawnWorkers();for(var i=function(){var t;t=[];for(var i=0;e>=0?e>i:i>e;e>=0?++i:--i)t.push(i);return t}.apply(this,arguments),s=0,n=i.length;n>s;++s)t=i[s],this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},e.prototype.abort=function(){for(var t;;){if(t=this.activeWorkers.shift(),!(null!=t))break;console.log("killing active worker"),t.terminate()}return this.running=!1,this.emit("abort")},e.prototype.spawnWorkers=function(){var t;return t=Math.min(this.options.workers,this.frames.length),function(){var e;e=[];for(var i=this.freeWorkers.length;this.freeWorkers.length<=t?t>i:i>t;this.freeWorkers.length<=t?++i:--i)e.push(i);return e}.apply(this,arguments).forEach(function(t){return function(e){var i;return console.log("spawning worker "+e),i=new Worker(t.options.workerScript),i.onmessage=function(t){return function(e){return t.activeWorkers.splice(t.activeWorkers.indexOf(i),1),t.freeWorkers.push(i),t.frameFinished(e.data)}}(t),t.freeWorkers.push(i)}}(this)),t},e.prototype.frameFinished=function(t){return console.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,o(null,this.imageParts)?this.renderNextFrame():this.finishRendering()},e.prototype.finishRendering=function(){var t,e,i,s,n,r,o;n=0;for(var h=0,a=this.imageParts.length;a>h;++h)e=this.imageParts[h],n+=(e.data.length-1)*e.pageSize+e.cursor;n+=e.pageSize-e.cursor,console.log("rendering finished - filesize "+Math.round(n/1e3)+"kb"),t=new Uint8Array(n),r=0;for(var u=0,l=this.imageParts.length;l>u;++u){e=this.imageParts[u];for(var c=0,d=e.data.length;d>c;++c)o=e.data[c],i=c,t.set(o,r),r+=i===e.data.length-1?e.cursor:e.pageSize}return s=new Blob([t],{type:"image/gif"}),this.emit("finished",s,t)},e.prototype.renderNextFrame=function(){var t,e,i;if(0===this.freeWorkers.length)throw new Error("No free workers");return this.nextFrame>=this.frames.length?void 0:(t=this.frames[this.nextFrame++],i=this.freeWorkers.shift(),e=this.getTask(t),console.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(i),i.postMessage(e))},e.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},e.prototype.getImageData=function(t){var e;return null!=this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),e=this._canvas.getContext("2d"),e.setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},e.prototype.getTask=function(t){var e,i;if(e=this.frames.indexOf(t),i={index:e,last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,repeat:this.options.repeat,canTransfer:"chrome"===a.name},null!=t.data)i.data=t.data;else if(null!=t.context)i.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");i.data=this.getImageData(t.image)}return i},e}(l),t.exports=d}),e.define("/browser.coffee",function(t,e,i,s){var n,r,o,h,a;h=navigator.userAgent.toLowerCase(),o=navigator.platform.toLowerCase(),a=h.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],r="ie"===a[1]&&document.documentMode,n={name:"version"===a[1]?a[3]:a[1],version:r||parseFloat("opera"===a[1]&&a[4]?a[4]:a[2]),platform:{name:h.match(/ip(?:ad|od|hone)/)?"ios":(h.match(/(?:webos|android)/)||o.match(/mac|win|linux/)||["other"])[0]}},n[n.name]=!0,n[n.name+parseInt(n.version,10)]=!0,n.platform[n.platform.name]=!0,t.exports=n}),e.define("events",function(t,e,s,n){i.EventEmitter||(i.EventEmitter=function(){});var r=e.EventEmitter=i.EventEmitter,o="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},h=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||o(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"!=typeof e){if(o(e)){for(var i=Array.prototype.slice.call(arguments,1),s=e.slice(),n=0,r=s.length;r>n;n++)s[n].apply(this,i);return!0}return!1}switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);e.apply(this,i)}return!0},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(o(this._events[t])){if(!this._events[t].warned){var i;i=void 0!==this._events.maxListeners?this._events.maxListeners:h,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){var i=this;return i.on(t,function s(){i.removeListener(t,s),e.apply(this,arguments)}),this},r.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var i=this._events[t];if(o(i)){var s=i.indexOf(e);if(0>s)return this;i.splice(s,1),0==i.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return t&&this._events&&this._events[t]&&(this._events[t]=null),this},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),o(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}),t.GIF=e("/gif.coffee")}.call(this,this),h("gif",function(){}),h("squiggle/views/animation/AnimationRender",["require","exports","module","squiggle/views/animation/BaseRender","squiggle/models/Line","gif"],function(t,e,i){var s=t("squiggle/views/animation/BaseRender"),n=(t("squiggle/models/Line"),t("gif"),s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.__currentFrameIndex=0,this.__playing=!1,this.__frameDelayCounter=0,this.model=null,this.initProperties([{name:"frameDelay",value:1},{name:"exportFrameDelay",value:125}])},play:function(){return this.__playing=!0,this},pause:function(){return this.__playing=!1,this},stop:function(){return this.__playing=!1,this.__currentFrameIndex=0,this},gotoFrame:function(t){return null!=this.model.models[t]?this.__drawFrame(this.model.models[t]):console.log(this.getName()+": gotoFrame() ERROR : frame "+t+" does not exist."),this},setModel:function(t){return this.model=t,this},"export":function(t){var e=new window.GIF({workerScript:this.getWorkerScript()});for(index in this.model.models){var i=this.model.models[index],s=this.__getImageData(i);e.addFrame(s,{delay:this.exportFrameDelay})}e.on("finished",function(e){t(e)}),e.render()},draw:function(){null!=this.model&&(s.prototype.updateOffset.apply(this,arguments),s.prototype.draw.apply(this,arguments),this.gotoFrame(this.__currentFrameIndex),this.__playing&&(this.__frameDelayCounter++,this.__frameDelayCounter>=this.frameDelay&&(this.__frameDelayCounter=0,this.__currentFrameIndex++,this.__currentFrameIndex>=this.model.models.length&&(this.__currentFrameIndex=0))))}}));return n}),h("squiggle/views/primitives/Rectangle",["require","exports","module","squiggle/views/primitives/DrawView","squiggle/utils/MathUtils"],function(t,e,i){var s=t("squiggle/views/primitives/DrawView"),n=t("squiggle/utils/MathUtils"),r=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.initProperties([{name:"width",value:0},{name:"height",value:0},{name:"roundedCorners",value:[0,0,0,0]}]),this.closed=!0},draw:function(){if(!this.hidden&&(0!==this.width||0!==this.height)){var t=0,e=0,i=0,r=0;null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.applyStrokeProperties(),this.fill?this.sketch.fill(this.fillColor):this.sketch.noFill(),this.jerkiness>0&&(t=Math.random()*this.jerkiness*n.coinToss(),e=Math.random()*this.jerkiness*n.coinToss(),i=Math.random()*this.jerkiness*n.coinToss(),r=Math.random()*this.jerkiness*n.coinToss()),"number"==typeof this.roundedCorners&&(this.rc_tl=this.rc_tr=this.rc_br=this.rc_bl=this.roundedCorners),void 0!==this.roundedCorners[0]&&(this.rc_tl=this.roundedCorners[0]),void 0!==this.roundedCorners[1]&&(this.rc_tr=this.roundedCorners[1]),void 0!==this.roundedCorners[2]&&(this.rc_br=this.roundedCorners[2]),void 0!==this.roundedCorners[3]&&(this.rc_bl=this.roundedCorners[3]),this.sketch.rect(this.x+this.offsetX+t,this.y+this.offsetY+e,this.width+i,this.height+r,this.rc_tl,this.rc_tr,this.rc_br,this.rc_bl),s.prototype.draw.apply(this,arguments)}}});return r}),h("squiggle/views/animation/FrameCapture",["require","exports","module","squiggle/models/Frame","squiggle/models/Line","squiggle/views/primitives/Rectangle"],function(t,e,i){var s=t("squiggle/models/Frame"),n=t("squiggle/models/Line"),r=t("squiggle/views/primitives/Rectangle"),o=r.extend({initialize:function(t){r.prototype.initialize.apply(this,arguments),this.model=new s,this.__lineInProgress=null,this.initProperties([{name:"frameRender",value:null}]),this.setUserInteractionEnabled(!0)},clear:function(){return this.model.clear(),this},toJSON:function(){return this.model.toJSON()},__startActiveLine:function(){this.__lineInProgress=(new n).set("strokeColor",this.strokeColor).set("strokeWeight",this.strokeWeight).set("strokeCap",this.strokeCap).set("strokeJoin",this.strokeJoin)},getLineInProgress:function(){return this.__lineInProgress},__endActiveLine:function(){null!=this.__lineInProgress&&(0===this.__lineInProgress.get("points").length&&this.__addPointToActiveLine(this.__returnMousePositionWithoutOffset()),this.model.addLine(this.__lineInProgress),this.__lineInProgress=null)},__addPointToActiveLine:function(t){this.__lineInProgress.addPoint(t[0],t[1])},draw:function(){null!=this.frameRender&&this.frameRender.setModel(this.model).setLineInProgress(this.__lineInProgress)},isMouseInBounds:function(){return this.isMouseOverRectangle(this.offsetX+this.x,this.offsetY+this.y,this.offsetX+this.x+this.width,this.offsetY+this.y+this.height)},isTouchInBounds:function(){return this.isTouchOverRectangle(this.offsetX+this.x,this.offsetY+this.y,this.offsetX+this.x+this.width,this.offsetY+this.y+this.height)},__returnMousePositionWithoutOffset:function(){return[this.sketch.mouseX-this.offsetX-this.x,this.sketch.mouseY-this.offsetY-this.y]},mouseMoved:function(){this.isMouseInBounds()||null!=this.__lineInProgress&&this.__endActiveLine()},mouseDragged:function(){this.isMouseInBounds()?null!=this.__lineInProgress?this.__addPointToActiveLine(this.__returnMousePositionWithoutOffset()):this.__startActiveLine():null!=this.__lineInProgress&&this.__endActiveLine()},touchMoved:function(){this.isTouchInBounds()?null!=this.__lineInProgress?this.__addPointToActiveLine(this.__returnMousePositionWithoutOffset()):this.__startActiveLine():null!=this.__lineInProgress&&this.__endActiveLine()},touchStarted:function(){this.isTouchInBounds()&&this.__startActiveLine()},mousePressed:function(){this.isMouseInBounds()&&this.__startActiveLine()},touchEnded:function(){null!=this.__lineInProgress&&this.__endActiveLine()},mouseReleased:function(){null!=this.__lineInProgress&&this.__endActiveLine()}});return o}),h("squiggle/views/animation/FrameRender",["require","exports","module","squiggle/views/animation/BaseRender"],function(t,e,i){var s=t("squiggle/views/animation/BaseRender"),n=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.__lineInProgress=void 0},setLineInProgress:function(t){return this.__lineInProgress=t,this},setModel:function(t){return this.model=t,this},draw:function(){if(this.model&&!this.hidden){if(s.prototype.updateOffset.apply(this,arguments),s.prototype.draw.apply(this,arguments),this.__drawFrame(this.model),this.__lineInProgress){this.sketch.noFill(),this.sketch.beginShape(),this.applyStrokeProperties(this.sketch,this.__lineInProgress.exportStrokeProperties());for(var t in this.__lineInProgress.get("points"))this.sketch.vertex(this.offsetX+this.x+this.__lineInProgress.get("points")[t][0],this.offsetY+this.y+this.__lineInProgress.get("points")[t][1]);this.sketch.endShape()}}},"export":function(t){var e=this.__getImageData(this.model),i=new window.GIF({workerScript:this.getWorkerScript()});i.addFrame(e),i.on("finished",function(e){t(e)}),i.render()}});return n}),h("squiggle/views/primitives/Path",["require","exports","module","squiggle/views/primitives/DrawView","squiggle/utils/MathUtils"],function(t,e,i){var s=t("squiggle/views/primitives/DrawView"),n=t("squiggle/utils/MathUtils"),r=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.points=[]},addPoint:function(t,e){return this.points.push([t,e]),this},clearPoints:function(){return this.points=[],this},draw:function(){var t=0,e=0;if(!this.hidden){null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.applyStrokeProperties(),this.fill?this.sketch.fill(this.fillColor):this.sketch.noFill(),this.sketch.beginShape();for(var i in this.points)this.jerkiness>0&&(t=Math.random()*this.jerkiness*n.coinToss(),e=Math.random()*this.jerkiness*n.coinToss()),this.sketch.vertex(this.offsetX+this.x+this.points[i][0]+t,this.offsetY+this.y+this.points[i][1]+e);this.closed?this.sketch.endShape(this.sketch.CLOSE):this.sketch.endShape(),s.prototype.draw.apply(this,arguments)}}});return r}),h("squiggle/views/primitives/DashedLine",["require","exports","module","squiggle/views/primitives/Path","squiggle/utils/MathUtils"],function(t,e,i){var s=t("squiggle/views/primitives/Path"),n=t("squiggle/utils/MathUtils"),r=s.extend({initialize:function(t){return s.prototype.initialize.apply(this,arguments),this.stepCounter=0,this.step=!0,this.initProperties([{name:"spacing",value:[8,8]},{name:"steps",value:60}]),this},drawDashedLine:function(t,e,i,s,r,o){var h=this.sketch.dist(t,e,i,s),a=[],u=[],l=0,c=0;if(h>0){for(c=0;c<r.length;c++)a[c]=this.sketch.lerp(0,i-t,r[c]/h),u[c]=this.sketch.lerp(0,s-e,r[c]/h);for(c=0;h>l;){if(o){var d=0,g=0,f=0,p=0;0!=this.jerkiness&&(d=Math.random()*this.jerkiness*n.coinToss(),g=Math.random()*this.jerkiness*n.coinToss(),f=Math.random()*this.jerkiness*n.coinToss(),p=Math.random()*this.jerkiness*n.coinToss()),this.sketch.line(t+d,e+g,t+a[c]+f,e+u[c]+p)}t+=a[c],e+=u[c],l+=this.sketch.mag(a[c],u[c]),c=(c+1)%r.length,o=!o}}},draw:function(){if(null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.points.length>1){this.applyStrokeProperties();for(var t=0;t<this.points.length;t++)void 0!=this.points[t+1]&&this.drawDashedLine(this.points[t][0],this.points[t][1],this.points[t+1][0],this.points[t+1][1],this.spacing,this.step);this.stepCounter++,this.stepCounter===this.steps&&(this.step=!this.step,this.stepCounter=0)}}});return r}),h("squiggle/views/screens/Screen",["require","exports","module","squiggle/views/View"],function(t,e,i){var s=t("squiggle/views/View"),n=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.__wasSetup=!1,this.backgroundColor="White"},__setup:function(){this.__wasSetup=!0,this.setup()},__draw:function(){this.__wasSetup||this.__setup(),null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),null!=this.backgroundColor&&this.sketch.background(this.backgroundColor),s.prototype.draw.apply(this,arguments),this.draw()},setup:function(){},draw:function(){},keyPressed:function(){this.__callonSubviewsIfUIE("keyPressed")},keyTyped:function(){this.__callonSubviewsIfUIE("keyTyped")},onValueInjected:function(t,e){}});return n}),h("squiggle/views/sprites/cursors/PencilCursor",["require","exports","module","squiggle/views/primitives/Path","squiggle/models/AppSettings"],function(t,e,i){var s=t("squiggle/views/primitives/Path"),n=t("squiggle/models/AppSettings"),r=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments);var e=5;this.setStrokeWeight(2),this.fillColor=n.defaultFillColor,this.addPoint(0,0),this.addPoint(e,0),this.addPoint(3*e,2*e),this.addPoint(2*e,3*e),this.addPoint(0,e)}});return r}),h("squiggle/views/text/BluePrints",["require","exports","module"],function(t,e,i){var s={_b:[{k:"",v:[]},{k:" ",v:[]},{k:"1",v:[[1,1],[2,22],[21,23]]},{k:"2",v:[[1,5],[5,10],[10,16],[16,21],[21,25]]},{k:"3",v:[[1,5],[5,25],[25,21],[-1,-1],[11,15]]},{k:"4",v:[[1,11],[11,15],[-2],[4,24]]},{k:"5",v:[[4,1],[1,11],[11,14],[14,20],[20,24],[24,21]]},{k:"6",v:[[5,1],[1,21],[21,25],[25,15],[15,11]]},{k:"7",v:[[1,3],[3,23],[-1,-1],[11,15]]},{k:"8",v:[[5,1],[1,21],[21,25],[25,5],[-1,-1],[11,15]]},{k:"9",v:[[1,5],[1,11],[11,15],[15,25],[25,21],[-1,-1],[5,15]]},{k:"0",v:[[5,1],[1,21],[21,25],[25,5],[-1,-1],[5,21]]},{k:"a",v:[[1,5],[5,25],[-1,-1],[1,21],[-1,-1],[11,15]]},{k:"b",v:[[1,21],[21,25],[25,15],[15,11],[-1,-1],[1,4],[4,14]]},{k:"c",v:[[1,5],[1,21],[21,25]]},{k:"d",v:[[1,21],[21,24],[24,20],[20,10],[10,4],[4,1]]},{k:"f",v:[[5,1],[1,21],[-1,-1],[11,14]]},{k:"e",v:[[5,1],[1,21],[21,25],[-1,-1],[11,14]]},{k:"g",v:[[5,1],[1,21],[21,25],[25,15],[15,13]]},{k:"h",v:[[1,21],[-1,-1],[11,15],[-1,-1],[5,25]]},{k:"k",v:[[1,21],[-1,-1],[5,11],[8,25]]},{k:"i",v:[[1,3],[2,22],[21,23]]},{k:"j",v:[[4,5],[5,25],[25,21]]},{k:"l",v:[[1,21],[21,25]]},{k:"m",v:[[21,1],[1,18],[18,5],[5,25]]},{k:"n",v:[[21,1],[1,25],[25,5]]},{k:"o",v:[[5,1],[1,21],[21,25],[25,5]]},{k:"p",v:[[11,15],[15,5],[5,1],[1,21]]},{k:"q",v:[[5,1],[1,21],[21,25],[25,5],[-1,-1],[18,28]]},{k:"r",v:[[11,15],[15,5],[5,1],[1,21],[-1,-1],[14,25]]},{k:"s",v:[[5,1],[1,11],[11,15],[15,25],[25,21]]},{k:"t",v:[[1,5],[-1,-1],[3,23]]},{k:"u",v:[[1,21],[21,25],[25,5]]},{k:"v",v:[[1,23],[23,5]]},{k:"w",v:[[1,22],[22,18],[18,24],[24,5]]},{k:"x",v:[[1,25],[-1,-1],[5,21]]},{k:"y",v:[[1,13],[13,23],[-1,-1],[13,5]]},{k:"z",v:[[1,5],[5,21],[21,25]]},{k:"!",v:[[2,12],[-1,-1],[17,22]]},{k:"?",v:[[28,23],[-1,-1],[18,13],[13,15],[15,5],[5,2],[2,6]]},{k:">",v:[[1,13],[13,21]]},{k:"+",v:[[3,23],[-1,-1],[11,15]]},{k:"*",v:[[3,23],[-1,-1],[11,15],[-1,-1],[1,25],[-1,-1],[5,21]]},{k:"=",v:[[6,10],[-1,-1],[16,20]]
},{k:"-",v:[[11,15]]},{k:"(",v:[[2,6],[6,16],[16,22]]},{k:")",v:[[4,10],[10,20],[20,24]]},{k:".",v:[[22,22]]},{k:"/",v:[[21,3]]}],_wf:[{k:"!",v:3},{k:">",v:3},{k:"",v:0},{k:"i",v:3},{k:"1",v:3},{k:".",v:3},{k:"/",v:3}],getWidthFactor:function(t){for(var e=0;e<s._wf.length;e++)if(s._wf[e].k==t)return s._wf[e].v;return 5},getBluePrint:function(t){for(var e=0;e<s._b.length;e++)if(s._b[e].k==t)return s._b[e].v}};return s}),h("squiggle/views/text/Letter",["require","exports","module","squiggle/views/primitives/Path","squiggle/models/AppSettings","squiggle/views/text/BluePrints","squiggle/utils/MathUtils"],function(t,e,i){var s=t("squiggle/views/primitives/Path"),n=t("squiggle/models/AppSettings"),r=t("squiggle/views/text/BluePrints"),o=t("squiggle/utils/MathUtils"),h=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.fontSize=16,this.strokeWeight=3,this.jerkiness=1,this.initProperties([{name:"blueprint",value:[]},{name:"widthFactor",value:5}]),this.positions=[],this.mustCalculatePositions=!0},setCharacter:function(t){t=t.toLowerCase();var e=r.getBluePrint(t);return void 0==e&&(t="*",e=r.getBluePrint(t)),e.push([-1,-1]),this.setBlueprint(e).setWidthFactor(r.getWidthFactor(t)),this},setFontSize:function(t){return t!==this.fontSize&&(this.fontSize=t,this.mustCalculatePositions=!0),this},pointIsSpace:function(t){return-1===this.points[t][0]&&-1===this.points[t][1]},calculatePositionsForFontSize:function(){this.positions=[],this.positions.push(void 0);var t=6,e=5,i=0;i=this.fontSize/e;for(var s=0;t>s;s++)for(var n=0;e>n;n++)this.positions.push([n*i,s*i]);this.mustCalculatePositions=!1},draw:function(){var t,e,i,r,h=!1,a=this.strokeColor,u=this.strokeWeight,l=0,c=0;if(null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.mustCalculatePositions){this.calculatePositionsForFontSize(),this.points=[];for(var d=0;d<this.blueprint.length;d++)t=this.blueprint[d][0],i=this.positions[t],void 0!=i?this.addPoint(i[0],i[1]):this.addPoint(-1,-1),e=this.blueprint[d][1],r=this.positions[e],void 0!=r?this.addPoint(r[0],r[1]):this.addPoint(-1,-1)}if(this.debug&&this.points.length>1&&(this.setStrokeColor(n.defaultStrokeColor).setStrokeWeight(n.defaultStrokeWeight).applyStrokeProperties(),this.sketch.line(this.x+this.offsetX+this.positions[1][0],this.y+this.offsetY+this.positions[1][1],this.x+this.offsetX+this.positions[5][0],this.y+this.offsetY+this.positions[5][1]),this.sketch.line(this.x+this.offsetX+this.positions[21][0],this.y+this.offsetY+this.positions[21][1],this.x+this.offsetX+this.positions[25][0],this.y+this.offsetY+this.positions[25][1]),this.sketch.line(this.x+this.offsetX+this.positions[1][0],this.y+this.offsetY+this.positions[1][1],this.x+this.offsetX+this.positions[21][0],this.y+this.offsetY+this.positions[21][1]),this.sketch.line(this.x+this.offsetX+this.positions[5][0],this.y+this.offsetY+this.positions[5][1],this.x+this.offsetX+this.positions[25][0],this.y+this.offsetY+this.positions[25][1])),this.points.length>1){this.setStrokeColor(a).setStrokeWeight(u).applyStrokeProperties(),this.sketch.strokeJoin(this.sketch.BEVEL);for(var d=0;d<this.points.length;d++)0==d&&(this.sketch.noFill(),this.sketch.beginShape(),h=!0),this.pointIsSpace(d)?(h&&(this.sketch.endShape(),h=!1),this.sketch.noFill(),this.sketch.beginShape(),h=!0):(l=Math.random()*this.jerkiness*o.coinToss(),c=Math.random()*this.jerkiness*o.coinToss(),this.sketch.vertex(this.x+this.offsetX+l+this.points[d][0],this.y+this.offsetY+c+this.points[d][1]))}}});return h.widthFactorDivider=5,h}),h("squiggle/views/text/Word",["require","exports","module","squiggle/views/primitives/DrawView","squiggle/views/text/Letter"],function(t,e,i){var s=t("squiggle/views/primitives/DrawView"),n=t("squiggle/views/text/Letter"),r=s.extend({initialize:function(t){s.prototype.initialize.apply(this,arguments),this.w="",this.jerkiness=2,this.initProperties([{name:"fontSize",value:24}])},setFontColor:function(t){return this.strokeColor=t,this},setText:function(t){var e=0,i=null;this.removeAllSubviews(),this.w=t;for(var s=0,r=t.length;r>s;s++)i=(new n).setCharacter(t[s]).setPosition(e,0),e+=this.fontSize/n.widthFactorDivider*i.widthFactor+this.fontSize/n.widthFactorDivider*2,this.addSubview(i);return this},getText:function(){return this.w},getWidth:function(){if(this.subviews.length>0){var t=this.subviews[this.subviews.length-1];return t.getX()+this.fontSize/n.widthFactorDivider*t.widthFactor}return 0},draw:function(){if(!this.hidden){null!=arguments[0]&&s.prototype.updateOffset.apply(this,arguments),this.__updateJerkiness();for(var t in this.subviews)this.subviews[t].debug=this.debug,this.subviews[t].setFontSize(this.fontSize).setJerkiness(this.jerkiness).setStrokeColor(this.strokeColor).setStrokeWeight(this.strokeWeight),this.subviews[t].draw([this.x+this.offsetX,this.y+this.offsetY])}},centerHorizontalOnWindow:function(){return this.x=window.innerWidth/2-this.getWidth()/2,this},centerVerticalOnWindow:function(){return this.y=window.innerHeight/2-this.fontSize/2,this},centerOnWindow:function(){return this.centerVerticalOnWindow(),this.centerHorizontalOnWindow(),this}});return r}),h("squiggle/views/ui/Button",["require","exports","module","squiggle/views/text/Word","squiggle/views/primitives/DrawView","squiggle/views/primitives/Path","squiggle/views/primitives/Rectangle","squiggle/models/AppSettings"],function(t,e,i){var s=t("squiggle/views/text/Word"),n=t("squiggle/views/primitives/DrawView"),r=t("squiggle/views/primitives/Path"),o=t("squiggle/views/primitives/Rectangle"),h=t("squiggle/models/AppSettings"),a=n.extend({initialize:function(t){n.prototype.initialize.apply(this,arguments);var e,i;this.initProperties([{name:"padding",value:8},{name:"showUnderline",value:!0},{name:"autoAdjustSize",value:!0}]),this.height=0,this.width=0,this.__s=a.states.NORMAL,e=h.defaultStrokeColor,i=h.defaultFillColor,this.__fc={},this.__fc[a.states.NORMAL]=e,this.__fc[a.states.HOVER]=e,this.__fc[a.states.DOWN]=e,this.__bc={},this.__bc[a.states.NORMAL]=i,this.__bc[a.states.HOVER]=i,this.__bc[a.states.DOWN]=i,this.__r=(new o).setJerkiness(.5).setStrokeWeight(0).setFillColor(this.__bc[a.states.NORMAL]),this.__w=(new s).setJerkiness(.5).setFontSize(14).setPosition(this.padding,this.padding).setFontColor(this.__fc[a.states.NORMAL]),this.__l=(new r).setStrokeWeight(1).setJerkiness(.5).setPosition(this.padding,this.padding).setHidden(!0).setStrokeColor(this.__fc[a.states.NORMAL]),this.userInteractionEnabled=!0,this.pressed=!1,this.addSubview(this.__r),this.addSubview(this.__w),this.addSubview(this.__l)},setText:function(t){this.__w.setText(t).setFontColor(this.__fc[a.states.NORMAL]);var e,i;return""===t?this.getAutoAdjustSize()&&this.__r.setWidth(this.width).setHeight(this.height):(e=this.__w.getWidth(),i=this.__w.fontSize,this.__l.clearPoints().addPoint(0,i+this.padding/2).addPoint(e,i+this.padding/2),this.getAutoAdjustSize()&&(this.__r.setWidth(e+2*this.padding).setHeight(i+2*this.padding),this.width=this.__r.width,this.height=this.__r.height)),this.centerWord(),this},jerkIt:function(t){this.__r.jerkIt(t);var e=void 0!==t&&t.amount&&t.complete?{amount:t.amount}:void 0;for(var i in this.subviews)this.subviews[i].jerkIt&&this.subviews[i]!==this.__r&&this.subviews[i].jerkIt(e)},setFontColorForState:function(t,e){return void 0!==this.__fc[e]&&(this.__fc[e]=t),this.___ucs(this.__s),this},setBackgroundColorForState:function(t,e){return void 0!==this.__bc[e]&&(this.__bc[e]=t),e===this.__s&&this.___ucs(this.__s),this},setWidth:function(t){return this.width=t,this.__r.setWidth(this.width),this.centerWord(),this},setHeight:function(t){return this.height=t,this.__r.setHeight(this.height),this.centerWord(),this},getBackgroundRectangle:function(){return this.__r},getWord:function(){return this.__w},getFontSize:function(){return this.__w.getFontSize()},setFontSize:function(t){return this.__w.setFontSize(t),this.centerWord(),this},isMouseInBounds:function(){return this.isMouseOverRectangle(this.offsetX+this.x,this.offsetY+this.y,this.offsetX+this.x+this.width,this.offsetY+this.y+this.height)},isTouchInBounds:function(){return this.isTouchOverRectangle(this.offsetX+this.x,this.offsetY+this.y,this.offsetX+this.x+this.width,this.offsetY+this.y+this.height)},draw:function(){null!=arguments[0]&&n.prototype.updateOffset.apply(this,arguments),this.hidden||(this.__l.hidden=!this.showUnderline,n.prototype.draw.apply(this,arguments))},mouseMoved:function(){this.__l.setHidden(!this.isMouseInBounds()),this.isMouseInBounds()?(this.__s=a.states.HOVER,this.___ucs(this.__s)):(this.pressed=!1,this.__s=a.states.NORMAL,this.___ucs(this.__s))},___ucs:function(t){this.__l.setStrokeColor(this.__bc[t]),this.__r.setFillColor(this.__bc[t]),this.__w.setFontColor(this.__fc[t])},mousePressed:function(){this.isMouseInBounds()&&(this.pressed=!0,this.__s=a.states.DOWN,this.___ucs(this.__s),this.trigger(a.events.PRESSED,this))},mouseReleased:function(){this.isMouseInBounds()&&this.pressed&&(this.__s=a.states.NORMAL,this.___ucs(this.__s),this.trigger(a.events.CLICKED,this)),this.pressed=!1},touchStarted:function(){this.isTouchInBounds()&&(this.pressed=!0,this.__s=a.states.DOWN,this.___ucs(this.__s),this.trigger(a.events.PRESSED,this))},touchMoved:function(){this.__l.setHidden(!this.isTouchInBounds()),this.isTouchInBounds()?(this.__s=a.states.DOWN,this.___ucs(this.__s)):(this.pressed=!1,this.__s=a.states.NORMAL,this.___ucs(this.__s))},touchEnded:function(){this.pressed&&(this.__s=a.states.NORMAL,this.___ucs(this.__s),this.trigger(a.events.CLICKED,this)),this.pressed=!1},centerHorizontalOnWindow:function(){return this.x=window.innerWidth/2-this.width/2,this},centerVerticalOnWindow:function(){return this.y=window.innerHeight/2-this.fontSize/2,this},centerOnWindow:function(){return this.centerVerticalOnWindow(),this.centerHorizontalOnWindow(),this},centerWord:function(){return this.__w.setPosition(this.width/2-this.__w.getWidth()/2,this.__r.height/2-this.getFontSize()/2),this}});return a.events={PRESSED:"BUTTON_PRESS",CLICKED:"BUTTON_CLICKED"},a.states={NORMAL:"NORMAL",HOVER:"HOVER",DOWN:"DOWN"},a}),h("squiggle",["require","p5","squiggle/models/AppSettings","squiggle/models/Animation","squiggle/models/Frame","squiggle/models/Line","squiggle/utils/MathUtils","squiggle/views/View","squiggle/views/animation/AnimationRender","squiggle/views/animation/AnimationRender","squiggle/views/animation/FrameCapture","squiggle/views/animation/FrameRender","squiggle/views/primitives/DashedLine","squiggle/views/primitives/DrawView","squiggle/views/primitives/Path","squiggle/views/primitives/Rectangle","squiggle/views/screens/Screen","squiggle/views/sprites/cursors/PencilCursor","squiggle/views/text/Letter","squiggle/views/text/Word","squiggle/views/text/BluePrints","squiggle/views/ui/Button"],function(t){"use strict";var e=t("p5"),i=t("squiggle/models/AppSettings"),s=t("squiggle/models/Animation"),n=t("squiggle/models/Frame"),r=t("squiggle/models/Line"),o=t("squiggle/utils/MathUtils"),h=t("squiggle/views/View"),a=t("squiggle/views/animation/AnimationRender"),u=t("squiggle/views/animation/AnimationRender"),l=t("squiggle/views/animation/FrameCapture"),c=t("squiggle/views/animation/FrameRender"),d=t("squiggle/views/primitives/DashedLine"),g=t("squiggle/views/primitives/DrawView"),f=t("squiggle/views/primitives/Path"),p=t("squiggle/views/primitives/Rectangle"),v=t("squiggle/views/screens/Screen"),m=t("squiggle/views/sprites/cursors/PencilCursor"),_=t("squiggle/views/text/Letter"),w=t("squiggle/views/text/Word"),k=t("squiggle/views/text/BluePrints"),y=t("squiggle/views/ui/Button");return{models:{AppSettings:i,Animation:s,Frame:n,Line:r},views:{View:h,animation:{BaseRender:a,AnimationRender:u,FrameCapture:l,FrameRender:c},primitives:{DashedLine:d,DrawView:g,Path:f,Rectangle:p},screens:{Screen:v},sprites:{cursors:{PencilCursor:m}},text:{Letter:_,Word:w,BluePrints:k},ui:{Button:y}},utils:{MathUtils:o},version:"1.1.6",screen:void 0,sketch:void 0,injectValue:function(t,e){void 0!==this.screen&&this.screen.onValueInjected(t,e)},init:function(){var t=this;new e(function(e){i.sketch=e,t.sketch=e,e.setup=function(){e.frameRate(30),e.createCanvas(window.innerWidth,window.innerHeight)},e.draw=function(){void 0!==t.screen&&t.screen.__draw(arguments)},e.mousePressed=function(){void 0!==t.screen&&t.screen.mousePressed()},e.mouseReleased=function(){void 0!==t.screen&&t.screen.mouseReleased()},e.mouseMoved=function(){void 0!==t.screen&&t.screen.mouseMoved()},e.mouseDragged=function(){void 0!==t.screen&&t.screen.mouseDragged()},e.keyPressed=function(){void 0!==t.screen&&t.screen.keyPressed()},e.keyTyped=function(){void 0!==t.screen&&t.screen.keyTyped()},e.touchStarted=function(){void 0!==t.screen&&t.screen.touchStarted()},e.touchEnded=function(){void 0!==t.screen&&t.screen.touchEnded()},e.touchMoved=function(){void 0!==t.screen&&t.screen.touchMoved()},e.windowResized=function(){e.resizeCanvas(window.innerWidth,window.innerHeight),void 0!==t.screen&&t.screen.windowResized()}},"sketch-div")}}}),h("jquery",function(){return t}),h("underscore",function(){return e}),h("backbone",function(){return s}),h("p5",function(){return n}),o("squiggle")});